%YAML 1.1
---
$schema: asdf://stsci.edu/datamodels/roman/schemas/rad_schema-1.0.0
id: asdf://stsci.edu/datamodels/roman/schemas/exposure-1.0.0


title: |
  Exposure information

allOf:
  - $ref: asdf://stsci.edu/datamodels/roman/schemas/ground_exposure-1.0.0
  - type: object
    properties:
      id:
        title: Exposure id number within visit
        description: The exposure number for a given visit id
        type: integer
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: int
          destination: [ScienceCommon.exposure_id, GuideWindow.exposure_id]
      mid_time:
        title: UTC exposure mid time
        description: |
            This is a python date-time object that records the
            time at the middle of the exposure in UTC.
        tag: tag:stsci.edu:asdf/time/time-1.*
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: datetime2
          destination: [ScienceCommon.exposure_mid_time, GuideWindow.exposure_mid_time]
      end_time:
        title: UTC exposure end time
        description: |
            This is a python date-time object that records the
            time at the end of the exposure in UTC.
        tag: tag:stsci.edu:asdf/time/time-1.*
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: datetime2
          destination: [ScienceCommon.exposure_end_time, GuideWindow.exposure_end_time]
      start_time_mjd:
        title: "[d] exposure start time in MJD"
        description: |
            This records the time at the start of the exposure using the
            Modified Julian Date (MJD). This is used in the archive catalog for
            multi-mission matching.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_start_time_mjd, GuideWindow.exposure_start_time_mjd]
      mid_time_mjd:
        title: "[d] exposure mid time in MJD"
        description: |
            This records the time at the midpoint of the exposure using the
            Modified Julian Date  (MJD). This is used in the archive catalog for
            multi-mission matching.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_mid_time_mjd, GuideWindow.exposure_mid_time_mjd]
      end_time_mjd:
        title: "[d] exposure end time in MJD"
        description: |
            This records the time at the end of the exposure using the
            Modified Julian Date  (MJD). This is used in the archive catalog for
            multi-mission matching.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_end_time_mjd, GuideWindow.exposure_end_time_mjd]
      start_time_tdb:
        title: "[d] TDB time of exposure start in MJD"
        description: |
            This records the time at the start of the exposure using
            the Modified Julian Date for the Barycentric Dynamical Time system
            (TDB, Temps Dynamique Barycentrique), a relativistic coordinate
            time scale.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_start_time_tdb, GuideWindow.exposure_start_time_tdb]
      mid_time_tdb:
        title: "[d] TDB time of exposure mid in MJD"
        description: |
            This records the time at the midpoint of the exposure using
            the Modified Julian Date for the Barycentric Dynamical Time system
            (TDB, Temps Dynamique Barycentrique), a relativistic coordinate
            time scale.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_mid_time_tdb, GuideWindow.exposure_mid_time_tdb]
      end_time_tdb:
        title: "[d] TDB time of exposure end in MJD"
        description: |
            This records the time at the end of the exposure using
            the Modified Julian Date for the Barycentric Dynamical Time system
            (TDB, Temps Dynamique Barycentrique), a relativistic coordinate
            time scale.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_end_time_tdb, GuideWindow.exposure_end_time_tdb]
      sca_number:
        title: Sensor Chip Assembly number
        type: integer
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: int
          destination: [ScienceCommon.exposure_sca_number, GuideWindow.exposure_sca_number]
      gain_factor:
        title: Gain scale factor
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_gain_factor, GuideWindow.exposure_gain_factor]
      integration_time:
        title: "[s] Effective integration time"
        description: The effective time that the sensor has been exposed to the sky.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_integration_time, GuideWindow.exposure_integration_time]
      elapsed_exposure_time:
        title: "[s] Total elapsed exposure time"
        description: |
            The time between the start of the first Reset/Read Science Frame of an Exposure
            and the completion of the final Read Only Science Frame of that Exposure.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.elapsed_exposure_time, GuideWindow.elapsed_exposure_time]
      effective_exposure_time:
        title: "[s] Effective exposure time"
        description: The time that the detector is collecting photons that are used in the resultants.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.effective_exposure_time, GuideWindow.effective_exposure_time]
      duration:
        title: "[s] Total duration of exposure"
        description: |
            The time that the detector is dedicated to an exposure. This includes any overhead
            and times for dropped frames etc.
        type: number
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: float
          destination: [ScienceCommon.exposure_duration, GuideWindow.exposure_duration]
      level0_compressed:
        title: Level 0 data was compressed
        description: |
            A flag to indicate that the exposure has data that needed to be decompressed by
            the ground system.
        type: boolean
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: nchar(1)
          destination: [ScienceCommon.exposure_level0_compressed, GuideWindow.exposure_level0_compressed]
      truncated:
        title: MA Tables were truncated
        description: |
            This is a flag to indicate that the the MA table was truncated.
        type: boolean
        sdf:
          special_processing: VALUE_REQUIRED
          source:
            origin: TBD
        archive_catalog:
          datatype: nchar(1)
          destination: [ScienceCommon.exposure_truncated]
    required: [id,
              mid_time, end_time,
              start_time_mjd, mid_time_mjd, end_time_mjd,
              start_time_tdb, mid_time_tdb, end_time_tdb,
              sca_number,
              gain_factor, integration_time, elapsed_exposure_time,
              effective_exposure_time, duration,
              level0_compressed]
    propertyOrder: [id,
              mid_time, end_time,
              start_time_mjd, mid_time_mjd, end_time_mjd,
              start_time_tdb, mid_time_tdb, end_time_tdb,
              sca_number,
              gain_factor, integration_time, elapsed_exposure_time,
              effective_exposure_time, duration,
              level0_compressed, truncated]
flowStyle: block
...
